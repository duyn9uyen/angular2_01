System.register(["angular2/core","./cert.service"],function(a,b){"use strict";var c,d,e,f=(b&&b.id,this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g}),g=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0};return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(a){this._certService=a,this.typeOfReports=[{id:"1",name:"Certifications"},{id:"2",name:"Tech Challenges"}],this.months=[{id:"01",name:"January",disabled:!1},{id:"02",name:"February",disabled:!1},{id:"03",name:"March",disabled:!1},{id:"04",name:"April",disabled:!1},{id:"05",name:"May",disabled:!1},{id:"06",name:"June",disabled:!1},{id:"07",name:"July",disabled:!1},{id:"08",name:"August",disabled:!1},{id:"09",name:"September",disabled:!1},{id:"10",name:"October",disabled:!1},{id:"11",name:"November",disabled:!1},{id:"12",name:"December",disabled:!1}],this.selectedReport=this.typeOfReports[0],this.previousMonth=this.selectedMonth,this.baseYear=2015,this.years=this.getJsonArrayOfYears(),this.selectedYear=this.years[0],this.previousYear=this.years[0],this.learningPaths=["Mobile","WCC","Services & APIs","Cloud","DevOps"],this.graphData={currentSelectMonth:[0,0,0,0,0],previousSelectMonth:[0,0,0,0,0]},this.ignorePreviousMonth=!1,this.barDataToDisplay=[],this.pieDataToDisplay=[]}return a.prototype.ngOnInit=function(){this.disableFutureMonths(),"1"==this.selectedReport.id&&this.getAndRenderGraphs()},a.prototype.onTestGet=function(){var a=this;this._certService.getJsonTest().subscribe(function(b){return a.testGetData=JSON.stringify(b)},function(a){return console.log("error getting data")},function(){return console.log("finished getting data")})},a.prototype.onTestPost=function(){var a=this;this._certService.postJsonTest().subscribe(function(b){return a.testPostData=JSON.stringify(b)},function(a){return console.log("error posting data")},function(){return console.log("finished getting data")})},a.prototype.onSelectReport=function(a){this.selectedReport=null;for(var b=0;b<this.typeOfReports.length;b++)this.typeOfReports[b].id==a&&(this.selectedReport=this.typeOfReports[b]);"1"==this.selectedReport.id&&this.getAndRenderGraphs()},a.prototype.onSelectMonth=function(a){this.selectedMonth=null;for(var b=0;b<this.months.length;b++)this.months[b].id==a&&(this.selectedMonth=this.months[b]);this.getAndRenderGraphs()},a.prototype.onSelectYear=function(a){this.selectedYear=null;for(var b=0;b<this.years.length;b++)this.years[b].id==a&&(this.selectedYear=this.years[b]);this.disableFutureMonths(),this.getAndRenderGraphs()},a.prototype.onGenerateCharts=function(){this.getAndRenderGraphs()},a.prototype.getAndRenderGraphs=function(){$("#spin").spin({color:"#333",shadow:!1});this.barDataToDisplay=[],this.pieDataToDisplay=[],this.graphData={currentSelectMonth:[0,0,0,0,0],previousSelectMonth:[0,0,0,0,0]},this.getData()},a.prototype.getData=function(){var a=this;this.buildSearchFilter(),this._certService.getCertTrackingByDate(this.currentFilterUrl).subscribe(function(b){return a.parseData(a._currentData,a.graphData.currentSelectMonth,b)},function(a){return console.log("error getting current data: "+a)},function(){return a._certService.getCertTrackingByDate(a.previousFilterUrl).subscribe(function(b){return a.parseData(a._previousData,a.graphData.previousSelectMonth,b)},function(a){return console.log("error getting previous data: "+a)},function(){return a.buildAndLoadCharts()})})},a.prototype.parseData=function(a,b,c){a=c;for(var d=0;d<a.d.results.length;d++)switch(a.d.results[d].LearningPathValue){case"Mobile":b[0]++;break;case"WCC":b[1]++;break;case"Services & APIs":b[2]++;break;case"Cloud":b[3]++;break;case"DevOps":b[4]++}},a.prototype.buildAndLoadCharts=function(){this.buildChartData(),this.loadBarChart(),this.loadPieChart(),$("#spin").spin(!1)},a.prototype.buildSearchFilter=function(){var a=this.selectedYear.id+"-"+this.selectedMonth.id+"-01",b=this.selectedYear.id+"-0"+(parseInt(this.selectedMonth.id)+1).toString()+"-01",c="https",d="portal.captechventures.com",e="/PA/SI/_vti_bin/listdata.svc/CertificationTracking?$filter=%28DatePassed+ge+datetime%27",f="%27%29%20and%20%28DatePassed+lt+datetime%27",g="%27%29";this.currentFilterUrl=c+"://"+d+e+a+f+b+g;var h=parseInt(this.selectedMonth.id)-2;this.selectedYear.name;if(h>-1)this.previousMonth=this.months[h],this.previousYear=this.selectedYear;else{for(var i=0,j=0;j<this.years.length;j++)this.years[j].id==this.selectedYear.id&&(i=j+1);this.years[i]?(this.previousYear=this.years[i],this.ignorePreviousMonth=!1):this.ignorePreviousMonth=!0;var k=Math.abs(h),l=12-k;this.previousMonth=this.months[l]}var m=this.previousYear.id+"-"+this.previousMonth.id+"-01",n=this.selectedYear.id+"-"+this.selectedMonth.id.toString()+"-01";this.previousFilterUrl=c+"://"+d+e+m+f+n+g},a.prototype.getJsonArrayOfYears=function(){for(var a=new Date,b=a.getFullYear(),c=b-this.baseYear,d=[],e=0;c>=e;e++){var f=b-e,g={id:f.toString(),name:f.toString()};d.push(g)}return d},a.prototype.buildChartData=function(){var a={name:this.selectedMonth.name+" "+this.selectedYear.name,data:this.graphData.currentSelectMonth};this.barDataToDisplay.push(a);var b={name:this.previousMonth.name+" "+this.previousYear.name,data:this.graphData.previousSelectMonth};0==this.ignorePreviousMonth&&this.barDataToDisplay.unshift(b);var c=["Mobile",this.graphData.currentSelectMonth[0]];this.pieDataToDisplay.push(c);var d=["WCC",this.graphData.currentSelectMonth[1]];this.pieDataToDisplay.push(d);var e=["Services & APIs",this.graphData.currentSelectMonth[2]];this.pieDataToDisplay.push(e);var f=["Cloud",this.graphData.currentSelectMonth[3]];this.pieDataToDisplay.push(f);var g=["DevOps",this.graphData.currentSelectMonth[4]];this.pieDataToDisplay.push(g)},a.prototype.disableFutureMonths=function(){for(var a=new Date,b="0"+(a.getMonth()+1).toString(),c=a.getFullYear(),d=!1,e=0;e<this.months.length;e++)d&&this.selectedYear.id==c.toString()?this.months[e].disabled=!0:this.months[e].disabled=!1,this.months[e].id==b&&(d=!0);d&&this.selectedYear.id==c.toString()&&this.defaultToCurrentMonth()},a.prototype.defaultToCurrentMonth=function(){for(var a=new Date,b="0"+(a.getMonth()+1).toString(),c=0;c<this.months.length;c++)this.months[c].id==b&&(this.selectedMonth=this.months[c])},a.prototype.loadBarChart=function(){$("#bargraphContainer").highcharts({chart:{type:"bar"},title:{text:"Certifications by Learning Path"},subtitle:{text:"Month: "+this.selectedMonth.name},xAxis:{categories:this.learningPaths,title:{text:null}},yAxis:{min:0,title:{text:"# Passed",align:"high"},labels:{overflow:"justify"}},tooltip:{valueSuffix:" millions"},plotOptions:{bar:{dataLabels:{enabled:!0}}},legend:{layout:"vertical",align:"right",verticalAlign:"top",x:-40,y:80,floating:!0,borderWidth:1,backgroundColor:Highcharts.theme&&Highcharts.theme.legendBackgroundColor||"#FFFFFF",shadow:!0},credits:{enabled:!1},series:this.barDataToDisplay})},a.prototype.loadPieChart=function(){$("#pieChartcContainer").highcharts({chart:{type:"pie",options3d:{enabled:!0,alpha:45,beta:0}},title:{text:"Certifications by Learning Path"},subtitle:{text:"Month: "+this.selectedMonth.name},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35,dataLabels:{enabled:!0,format:"{point.name}"}}},series:[{type:"pie",name:this.selectedMonth.name+" Cert(s)",data:this.pieDataToDisplay}]})},a=f([c.Component({selector:"my-app",templateUrl:"app/app.component.html",providers:[d.CertService]}),g("design:paramtypes",[d.CertService])],a)}(),a("AppComponent",e),$(document).ready(function(){})}}}),System.register(["angular2/core","angular2/http","rxjs/add/operator/map"],function(a,b){"use strict";var c,d,e,f=(b&&b.id,this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g}),g=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0};return{setters:[function(a){c=a},function(a){d=a},function(a){}],execute:function(){e=function(){function a(a){this._http=a,console.log("Service created.",a)}return a.prototype.getCertTrackingByDate=function(a){var b=new d.Headers;return b.append("Accept","application/json"),this._http.get(a,{headers:b}).map(function(a){return a.json()})},a.prototype.getJsonTest=function(){return this._http.get("http://localhost:3000/app/friends.json").map(function(a){return a.json()})},a.prototype.postJsonTest=function(){var a=JSON.stringify({something:"test",somethingElse:3}),b="json="+a,c=new d.Headers;return c.append("Content-Type","application/x-www-form-urlencoded)"),c.append("Access-Control-Allow-Origin","*"),c.append("Access-Control-Allow-Methods","POST, GET, PUT, DELETE, OPTIONS"),c.append("Accept","application/json"),this._http.post("http://validate.jsontest.com",b,{headers:c}).map(function(a){return a.json()})},a=f([c.Injectable(),g("design:paramtypes",[d.Http])],a)}(),a("CertService",e)}}}),System.register(["angular2/platform/browser","./app.component","angular2/http","angular2/core"],function(a,b){"use strict";var c,d,e,f;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){f.enableProdMode(),c.bootstrap(d.AppComponent,[e.HTTP_PROVIDERS])}}}),System.register([],function(a,b){"use strict";b&&b.id;return{setters:[],execute:function(){}}}),System.register([],function(a,b){"use strict";b&&b.id;return{setters:[],execute:function(){}}}),System.register([],function(a,b){"use strict";b&&b.id;return{setters:[],execute:function(){}}});